{"version":3,"sources":["../src/index.js"],"names":["dotenv","config","app","db","use","express","urlencoded","extended","json","secret","process","env","SESSION_SECRET","resave","saveUninitialized","NODE_ENV","console","log","passport","initialize","session","static","path","resolve","__dirname","get","req","res","sendFile","apiRouter","errorHandler","port","PORT","listen"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AACAA,gBAAOC,MAAP,G,CAEA;;;AACA,IAAMC,GAAG,GAAG,uBAAZ,C,CAEA;;AACA,IAAMC,EAAE,GAAG,wBAAX,C,CAEA;;AACAD,GAAG,CAACE,GAAJ,CAAQC,iBAAQC,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAL,GAAG,CAACE,GAAJ,CAAQC,iBAAQG,IAAR,EAAR;AACAN,GAAG,CAACE,GAAJ,CACE,6BAAQ;AACNK,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,cADd;AAENC,EAAAA,MAAM,EAAE,KAFF;AAGNC,EAAAA,iBAAiB,EAAE;AAHb,CAAR,CADF;;AAOA,IAAIJ,OAAO,CAACK,QAAR,IAAoB,YAAxB,EAAsC;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAf,EAAAA,GAAG,CAACE,GAAJ,CAAQ,2BAAR;AACAF,EAAAA,GAAG,CAACE,GAAJ,CAAQ,sBAAR;AACAF,EAAAA,GAAG,CAACE,GAAJ,CAAQ,oBAAR;AACD,CALD,MAKO;AACLY,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACD,C,CACD;;;AACAf,GAAG,CAACE,GAAJ,CAAQc,kBAASC,UAAT,EAAR;AACAjB,GAAG,CAACE,GAAJ,CAAQc,kBAASE,OAAT,EAAR;AACA,wBAAeF,iBAAf,E,CAEA;;AACA,IAAIR,OAAO,CAACK,QAAR,IAAoB,YAAxB,EAAsC;AACpCb,EAAAA,GAAG,CAACE,GAAJ,CAAQC,iBAAQgB,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,qBAAxB,CAAf,CAAR;AACAtB,EAAAA,GAAG,CAACuB,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,IAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,qBAAxB,EAA+C,YAA/C,CAAb;AACD,GAFD;AAGD,CALD,MAKO;AACLtB,EAAAA,GAAG,CAACE,GAAJ,CAAQC,iBAAQgB,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR;AACAtB,EAAAA,GAAG,CAACuB,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,IAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,GAFD;AAGD;;AACDtB,GAAG,CAACE,GAAJ,CAAQ,MAAR,EAAgByB,YAAhB;AAEA3B,GAAG,CAACE,GAAJ,CAAQ0B,mBAAR,E,CAEA;;AACA,IAAMC,IAAI,GAAGrB,OAAO,CAACC,GAAR,CAAYqB,IAAZ,IAAoB,IAAjC;AACA9B,GAAG,CAAC+B,MAAJ,CAAWF,IAAX,EAAiB,MAAM;AACrBf,EAAAA,OAAO,CAACC,GAAR,oDAAwDc,IAAxD;AACD,CAFD","sourcesContent":["import express from \"express\";\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport mongodb from \"./configs/database\";\nimport apiRouter from \"./routes/api\";\nimport dotenv from \"dotenv\";\nimport passportConfig from \"./configs/passport\";\nimport { errorHandler } from \"./helpers/error\";\nimport compression from \"compression\";\nimport helmet from \"helmet\";\nimport cors from \"cors\";\nimport path, { dirname } from \"path\";\ndotenv.config();\n\n//Initializing\nconst app = express();\n\n//Connecting to DB\nconst db = mongodb();\n\n//Middle-wares\napp.use(express.urlencoded({ extended: true }));\napp.use(express.json());\napp.use(\n  session({\n    secret: process.env.SESSION_SECRET,\n    resave: false,\n    saveUninitialized: true,\n  })\n);\nif (process.NODE_ENV == \"production\") {\n  console.log(\"Production Mode\");\n  app.use(compression());\n  app.use(helmet());\n  app.use(cors());\n} else {\n  console.log(\"Development Mode\");\n}\n// Passport middleware\napp.use(passport.initialize());\napp.use(passport.session());\npassportConfig(passport);\n\n//Routing\nif (process.NODE_ENV == \"production\") {\n  app.use(express.static(path.resolve(__dirname, \"/../../client/build\")));\n  app.get(\"*\", (req, res) => {\n    res.sendFile(path.resolve(__dirname, \"/../../client/build\", \"index.html\"));\n  });\n} else {\n  app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n  app.get(\"*\", (req, res) => {\n    res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n  });\n}\napp.use(\"/api\", apiRouter);\n\napp.use(errorHandler);\n\n//Activating\nconst port = process.env.PORT || 3001;\napp.listen(port, () => {\n  console.log(`Express application is listening on port ${port}`);\n});\n"],"file":"index.js"}